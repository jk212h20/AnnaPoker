<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Poker Trainer">
    <meta name="theme-color" content="#4ecca3">
    <title>Poker Trainer</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-192.svg">
</head>
<body>
    <div id="app">
        <!-- Mode Menu -->
        <nav class="mode-menu">
            <button class="menu-toggle" id="menu-toggle">â˜°</button>
            <div class="menu-dropdown hidden" id="menu-dropdown">
                <button class="menu-item active" data-mode="ranking">Hand Ranking</button>
                <button class="menu-item" data-mode="whichwins">Which Wins?</button>
                <button class="menu-item" data-mode="outs">Outs Counter</button>
                <button class="menu-item" data-mode="namehand">Name That Hand</button>
            </div>
        </nav>

        <!-- ==================== RANKING MODE ==================== -->
        <div id="ranking-mode" class="game-mode">
            <header>
                <div class="streak">ðŸ”¥ <span id="streak">0</span></div>
                <h1>Rank the Hands</h1>
                <div class="score">âœ“ <span id="correct">0</span>/<span id="total">0</span></div>
            </header>

            <section id="board" class="board">
                <h2>Board</h2>
                <div class="cards" id="board-cards">
                    <!-- 5 community cards -->
                </div>
            </section>

            <section id="instruction">
                <p>Tap hands from <strong>strongest</strong> to <strong>weakest</strong></p>
            </section>

            <section id="hands" class="hands">
                <!-- 4 player hands -->
            </section>

            <section id="result" class="result hidden">
                <div id="result-message"></div>
                <button id="next-btn" class="btn-next">Next Hand â†’</button>
            </section>

            <section id="rankings" class="rankings hidden">
                <h3>Correct Order:</h3>
                <ol id="rankings-list"></ol>
            </section>
        </div>

        <!-- ==================== WHICH WINS MODE ==================== -->
        <div id="whichwins-mode" class="game-mode hidden">
            <header>
                <div class="streak">ðŸ”¥ <span id="ww-streak">0</span></div>
                <h1>Which Wins?</h1>
                <div class="score">âœ“ <span id="ww-correct">0</span>/<span id="ww-total">0</span></div>
            </header>

            <section class="board ww-board">
                <h2>Board</h2>
                <div class="cards" id="ww-board-cards"></div>
            </section>

            <section class="ww-hands-container">
                <div class="ww-hand" id="ww-hand1">
                    <h3>Hand 1</h3>
                    <div class="cards" id="ww-hand1-cards"></div>
                    <div class="hand-description" id="ww-hand1-desc"></div>
                </div>
                <div class="ww-vs">VS</div>
                <div class="ww-hand" id="ww-hand2">
                    <h3>Hand 2</h3>
                    <div class="cards" id="ww-hand2-cards"></div>
                    <div class="hand-description" id="ww-hand2-desc"></div>
                </div>
            </section>

            <section class="ww-choices">
                <button class="ww-choice" id="ww-choice-1" data-choice="1">Hand 1</button>
                <button class="ww-choice ww-choice-tie" id="ww-choice-tie" data-choice="tie">Tie</button>
                <button class="ww-choice" id="ww-choice-2" data-choice="2">Hand 2</button>
            </section>

            <section id="ww-result" class="result hidden">
                <div id="ww-result-message"></div>
                <button id="next-ww-btn" class="btn-next">Next Hand â†’</button>
            </section>
        </div>

        <!-- ==================== OUTS MODE ==================== -->
        <div id="outs-mode" class="game-mode hidden">
            <header>
                <div class="streak">ðŸ”¥ <span id="outs-streak">0</span></div>
                <h1>Count Your Outs</h1>
                <div class="score">âœ“ <span id="outs-correct">0</span>/<span id="outs-total">0</span></div>
            </header>

            <section class="board outs-board">
                <h2>Turn</h2>
                <div class="cards" id="outs-board-cards">
                    <!-- 4 community cards -->
                </div>
            </section>

            <section class="outs-hands-container">
                <div class="outs-hand-section">
                    <h3>Your Hand</h3>
                    <div class="cards" id="your-hand-cards"></div>
                    <div class="hand-description" id="your-hand-desc"></div>
                </div>
                <div class="outs-hand-section opponent">
                    <h3>Opponent</h3>
                    <div class="cards" id="opponent-hand-cards"></div>
                    <div class="hand-description" id="opponent-hand-desc"></div>
                </div>
            </section>

            <section class="outs-scenario" id="outs-scenario">
                <p id="scenario-text">How many outs do you have to win?</p>
            </section>

            <section class="outs-input-section">
                <div class="outs-input-wrapper">
                    <input type="number" id="outs-input" class="outs-input" placeholder="?" min="0" max="52" inputmode="numeric">
                    <span class="outs-label">outs</span>
                </div>
                <button id="check-outs-btn" class="btn-check">Check</button>
            </section>

            <section id="outs-result" class="result hidden">
                <div id="outs-result-message"></div>
                <div id="outs-explanation" class="outs-explanation"></div>
                <button id="next-outs-btn" class="btn-next">Next Scenario â†’</button>
            </section>
        </div>

        <!-- ==================== NAME THAT HAND MODE ==================== -->
        <div id="namehand-mode" class="game-mode hidden">
            <header>
                <div class="streak">ðŸ”¥ <span id="nh-streak">0</span></div>
                <h1>Name That Hand</h1>
                <div class="score">âœ“ <span id="nh-correct">0</span>/<span id="nh-total">0</span></div>
            </header>

            <section class="nh-settings">
                <span class="nh-setting-label">Cards:</span>
                <div class="nh-card-count-btns" id="nh-card-count">
                    <button class="nh-count-btn active" data-count="5">5</button>
                    <button class="nh-count-btn" data-count="6">6</button>
                    <button class="nh-count-btn" data-count="7">7</button>
                </div>
            </section>

            <section class="nh-display">
                <h2>What's the best hand?</h2>
                <div class="cards nh-cards" id="nh-cards">
                    <!-- 5-7 card hand -->
                </div>
                <div class="nh-hand-desc" id="nh-hand-desc"></div>
            </section>

            <section class="nh-choices" id="nh-choices">
                <!-- Choice buttons generated by JS -->
            </section>

            <section id="nh-result" class="result hidden">
                <div id="nh-result-message"></div>
                <button id="next-nh-btn" class="btn-next">Next Hand â†’</button>
            </section>
        </div>
    </div>

    <script src="js/cards.js"></script>
    <script src="js/poker.js"></script>
    <script src="js/templates.js"></script>
    <script src="js/outs.js"></script>
    <script src="js/whichwins.js"></script>
    <script src="js/namehand.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Service Worker Registration for Offline Support -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
